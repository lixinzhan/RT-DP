#
# This file defines the environment variables used for PACS/DICOM processing
#

source ./env.common

#
# Define Dicom connection required information
#

# Local PACS
AET="RTEMR_DV"
IPADRR="192.168.115.142"
DCMPORT="4242"
APIPORT="8042"
USRPASS="physics:physics"
APIHTTP="http://${IPADRR}:${APIPORT}"

# Remote PACS
#AET_R="GRC_PACS"
AET_R="VMSDBD"
IPADRR_R="172.17.115.172"
DCMPORT_R="105"

# Default timeout for quries
TIMEOUT=600

#
# API Commands
#

# Echo: C-Echo
function api_echo {
	# $1: modality AET
	curl -X POST ${APIHTTP}/modalities/$1/echo -d '{ "Timeout": 10 }'
}

# Query: C-Find (this modality)
function api_find {
	# $1: json string
	curl -u ${USRPASS} ${APIHTTP}/tools/find --data '$1'
}

# Query: C-Find (remote modality)
function api_query {
	# $1: modality AET
	# $2: json string
	curl -u ${USRPASS} --request POST --url ${APIHTTP}/modalities/$1/query --data $2
}
function api_query_review {
	# $1: level, modality, query, or answers
	# $2: OBJID
	curl -u ${USRPASS} --request GET --url ${APIHTTP}/queries/$2/$1
}
function api_query_answer {
	# $1: OBJID
	# $2: answer number
	curl -u ${USRPASS} --request GET --url ${APIHTTP}/queries/$1/answers/$2/content
}
	

# Retrieve: C-Move
function api_move {
	# $1: remote modality, from
	# $2: json string
	curl -u ${USRPASS} --request POST --url ${APIHTTP}/modalities/$1/move --data $2
}

# Delete
function api_delete {
	# $1: patients, studies, series, or instances
	# $2: ID
	curl -u ${USRPASS} --request DELETE ${APIHTTP}/$1/$2
}

# List
function api_list {
	# $1: patients, studies, series, or instances
	curl -u ${USRPASS} ${APIHTTP}/$1
}

